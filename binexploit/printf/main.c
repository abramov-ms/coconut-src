#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

#include "secret.h"

void pretty_print(const char* str) {
  size_t len = strlen(str);
  for (size_t i = 0; i < len + 4; ++i) {
    printf("*");
  }

  printf("\n* ");
  printf(str);
  printf(" *\n");

  for (size_t i = 0; i < len + 4; ++i) {
    printf("*");
  }
  printf("\n");
}

int main() {
  printf("Secret @ %p\n", alloc_secret());
  fflush(stdout);

  printf("Nickname: ");
  char nickname[256];
  scanf("%255s", nickname);

  // [ptr]%08x.%08x.%08x...%s
  // 0x00007fffff...
  // '\x98\x88\x82\x41%08x'

  char buffer[512];
  sprintf(buffer, "Hello, %s!", nickname);

  int answer_to_the_ultimate_question_of_life_the_universe_and_everything = 42;
  pretty_print(buffer);

  return 0;
}
