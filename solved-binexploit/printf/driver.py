#!/usr/bin/python

import os
import sys
import subprocess

if __name__ == "__main__":
    bin = subprocess.Popen(["./printf32"], stdin=subprocess.PIPE, stdout=subprocess.PIPE)
    print(bin.stdout.readline())

    print("peek addr > ", end="")
    addr = int(input(), base=0)

    format = b"B"
    for _ in range(4):
        format = format + (int(addr % 256)).to_bytes()
        addr /= 256
    format = format + b"_%08x" * 17 + b"_%10s"
    print(format)

    (out, err) = bin.communicate(format)
    print(out)
